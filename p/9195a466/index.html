<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><title>巧妙使用正则——去除小数点后多余的零 | 人间日常 | 所行皆过往，所愿皆成真</title><meta name="author" content="SIWEN.PENG"><meta name="description" content="直接上代码

1
2
3
4
5
6
7
8
9
10
11
12
13


const arr=[&#39;1200.00100&#39;,&#39;1200.00000&#39;,&#39;1200.&#39;,&#39;1200&#39;,&#39;1200.10000&#39;,&#39;0.120010000&#39;,&#39;0.000011111&#39;]
const regexp=/(?:\.0*|(\.\d+?)0+)$/
arr.forEach((item)=&gt;{
    console.log(item.replace(regexp,&#39;$1&#39;))
})

// &gt; 1200.001
// &gt; 1200
// &gt; 1200
// &gt; 1200
// &gt; 1200.1
// &gt; 0.12001
// &gt; 0.000011111"><meta name="keywords" content="正则,js,去除零,psw,彭思文,siwen,思文,sven,java,study,solution,blog"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,minimal-ui"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta property="og:title" content="巧妙使用正则——去除小数点后多余的零"><meta property="og:site_name" content="人间日常"><meta property="og:image" content="image.svg"><link href="/avatar.jpg" rel="icon"><link rel="alternate" href="/atom.xml" title="人间日常" type="application/atom+xml"><link rel="stylesheet" href="/css/style.css" media="screen" type="text/css"><link rel="stylesheet" href="/css/custom.css" media="screen" type="text/css"><script src="//sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="blog"><div class="content"><header><div class="site-branding"><h1 class="site-title"><a href="/">人间日常</a></h1><p class="site-description">所行皆过往，所愿皆成真</p><span class="site-description" id="jinrishici-sentence">正在加载今日诗词....</span></div><nav class="site-navigation"><ul><li><a href="/">主页</a></li><li><a href="/archives/">归档</a></li><li><a href="/pics/">图记</a></li></ul></nav></header><main class="site-main posts-loop"><div id="container"><article><h3 class="article-title"><span>巧妙使用正则——去除小数点后多余的零</span></h3><div class="article-top-meta"><span class="posted-on"><a href="/p/9195a466/" rel="bookmark"><time class="entry-date published" datetime="2022-01-10T13:51:44.000Z">2022-01-10</time></a></span></div><div class="article-content"><div class="entry"><p>直接上代码</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-rel="JSX"><figure class="iseeu highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr=[<span class="string">&#x27;1200.00100&#x27;</span>,<span class="string">&#x27;1200.00000&#x27;</span>,<span class="string">&#x27;1200.&#x27;</span>,<span class="string">&#x27;1200&#x27;</span>,<span class="string">&#x27;1200.10000&#x27;</span>,<span class="string">&#x27;0.120010000&#x27;</span>,<span class="string">&#x27;0.000011111&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> regexp=<span class="regexp">/(?:\.0*|(\.\d+?)0+)$/</span></span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item.<span class="title function_">replace</span>(regexp,<span class="string">&#x27;$1&#x27;</span>))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &gt; 1200.001</span></span><br><span class="line"><span class="comment">// &gt; 1200</span></span><br><span class="line"><span class="comment">// &gt; 1200</span></span><br><span class="line"><span class="comment">// &gt; 1200</span></span><br><span class="line"><span class="comment">// &gt; 1200.1</span></span><br><span class="line"><span class="comment">// &gt; 0.12001</span></span><br><span class="line"><span class="comment">// &gt; 0.000011111</span></span><br></pre></td></tr></table></figure></div><span id="more"></span><p>正则可视化：</p><p><img src="/images/loading.svg" data-original="/p/9195a466/image.svg" alt="image"></p><p>推荐个可视化网址：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://regexper.com/">https://regexper.com/</a></p><!-- more --><p>再解释下正则的意思 <code>(?:.0*|(.\d+?)0+)$</code></p><p>先分解成 4 部分</p><ol><li><code>(?:reg1|reg2)</code> - 它是一个正则分组非捕获组，要么匹配 reg1，要么匹配 reg2，优先匹配 reg1，加上？: 不对捕获组记录</li><li><code>.0*</code> - 表示匹配一个。开头，后边跟着 0 或 0 个以上数量的 0，且不进行捕获，所以在填充 $1 时，就是个空值</li><li><code>(.\d+?)0+</code> - 它是一个捕获组，匹配一个。开头后边跟着非贪婪（懒惰）匹配任意数字，接着在末尾尽可能多的匹配 0 这个字符，匹配完成后，生成一个捕获组内容</li><li><code>$</code> - 表示匹配结果需要以 0 作为结尾</li></ol><h2 id="正则分组"><a class="markdownIt-Anchor" href="#正则分组">#</a> 正则分组</h2><ul><li><p>普通捕获组</p><p>从正则表达式左侧开始，每出现一个左括号 &quot;(&quot; 记做一个分组，分组编号从 1 开始。0 代表整个表达式。</p><p>对于时间字符串：2017-04-25，表达式如下</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-rel="JS"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(\\d&#123;<span class="number">4</span>&#125;)-((\\d&#123;<span class="number">2</span>&#125;)-(\\d&#123;<span class="number">2</span>&#125;))</span><br></pre></td></tr></table></figure></div><p>有 4 个左括号，所以有 4 个分组:</p><table><thead><tr><th style="text-align:left">编号</th><th style="text-align:left">捕获组</th><th style="text-align:left">匹配</th></tr></thead><tbody><tr><td style="text-align:left">0</td><td style="text-align:left">(\d{4})-((\d{2})-(\d{2}))</td><td style="text-align:left">2017-04-25</td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">(\d{4})</td><td style="text-align:left">2017</td></tr><tr><td style="text-align:left">2</td><td style="text-align:left">((\d{2})-(\d{2}))</td><td style="text-align:left">04-25</td></tr><tr><td style="text-align:left">3</td><td style="text-align:left">(\d{2})</td><td style="text-align:left">04</td></tr><tr><td style="text-align:left">4</td><td style="text-align:left">(\d{2})</td><td style="text-align:left">25</td></tr></tbody></table></li><li><p>命名捕获组</p><p>每个以左括号开始的捕获组，都紧跟着 <strong>?</strong>，而后才是正则表达式。</p><p>对于时间字符串：2017-04-25，表达式如下:</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-rel="JS"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(?&lt;year&gt;\\d&#123;<span class="number">4</span>&#125;)-(?&lt;md&gt;(?&lt;month&gt;\\d&#123;<span class="number">2</span>&#125;)-(?&lt;date&gt;\\d&#123;<span class="number">2</span>&#125;))</span><br></pre></td></tr></table></figure></div><p>有 4 个命名的捕获组，分别是:</p><table><thead><tr><th style="text-align:left">编号</th><th style="text-align:left">名称</th><th style="text-align:left">捕获组</th><th style="text-align:left">匹配</th></tr></thead><tbody><tr><td style="text-align:left">0</td><td style="text-align:left">0</td><td style="text-align:left">(?\d{4})-(?(?\d{2})-(?\d{2}))</td><td style="text-align:left">2017-04-25</td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">year</td><td style="text-align:left">(?\d{4})-</td><td style="text-align:left">2017</td></tr><tr><td style="text-align:left">2</td><td style="text-align:left">md</td><td style="text-align:left">(?(?\d{2})-(?\d{2}))</td><td style="text-align:left">04-25</td></tr><tr><td style="text-align:left">3</td><td style="text-align:left">month</td><td style="text-align:left">(?\d{2})</td><td style="text-align:left">04</td></tr><tr><td style="text-align:left">4</td><td style="text-align:left">date</td><td style="text-align:left">(?\d{2})</td><td style="text-align:left">25</td></tr></tbody></table><p>命名的捕获组同样也可以使用编号获取相应值。</p></li></ul><h2 id="非捕获组"><a class="markdownIt-Anchor" href="#非捕获组">#</a> 非捕获组</h2><p>在左括号后紧跟 <code>?:</code> ，而后再加上正则表达式，构成非捕获组 <strong>(?:Expression)</strong>。</p><p>对于时间字符串：2017-04-25，表达式如下:</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-rel="JS"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(?:\\d&#123;<span class="number">4</span>&#125;)-((\\d&#123;<span class="number">2</span>&#125;)-(\\d&#123;<span class="number">2</span>&#125;))</span><br></pre></td></tr></table></figure></div><p>这个正则表达式虽然有四个左括号，理论上有 4 个捕获组。但是第一组 <strong>(?:\d{4})</strong>，其实是被忽略的。当使用 matcher.group (4) 时，系统会报错。</p><table><thead><tr><th style="text-align:left">编号</th><th style="text-align:left">捕获组</th><th style="text-align:left">匹配</th></tr></thead><tbody><tr><td style="text-align:left">0</td><td style="text-align:left">(\d{4})-((\d{2})-(\d{2}))</td><td style="text-align:left">2017-04-25</td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">((\d{2})-(\d{2}))</td><td style="text-align:left">04-25</td></tr><tr><td style="text-align:left">2</td><td style="text-align:left">(\d{2})</td><td style="text-align:left">04</td></tr><tr><td style="text-align:left">3</td><td style="text-align:left">(\d{2})</td><td style="text-align:left">25</td></tr></tbody></table><h2 id="非贪婪懒惰匹配"><a class="markdownIt-Anchor" href="#非贪婪懒惰匹配">#</a> 非贪婪 (懒惰) 匹配</h2><p>** 贪婪匹配:** 正则表达式一般趋向于最大长度匹配，也就是所谓的贪婪匹配。如上面使用模式 p 匹配字符串 str，结果就是匹配到：<strong>abcaxc</strong>(ab*c)。</p><p><strong>非贪婪匹配</strong>：就是匹配到结果就好，就少的匹配字符。如上面使用模式 p 匹配字符串 str，结果就是匹配到：<strong>abc</strong>(ab*c)。</p><p>问号可以表示重复前面内容的 0 次或一次，也就是要么不出现，要么出现一次</p><p>示例 1：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-rel="JAVA"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">string</span> <span class="variable">pattern1</span> <span class="operator">=</span> @<span class="string">&quot;a.*?c&quot;</span>;   <span class="comment">// non-greedy match </span></span><br><span class="line"><span class="type">Regex</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Regex</span>(pattern1);</span><br><span class="line">regex.Match(<span class="string">&quot;abcabc&quot;</span>); <span class="comment">// return &quot;abc&quot;</span></span><br><span class="line"></span><br><span class="line">## 结果：abc</span><br></pre></td></tr></table></figure></div><p>示例 2：</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-rel="PYTHON"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s=<span class="string">&#x27;hello 1234567 world&#x27;</span></span><br><span class="line">res = re.<span class="keyword">match</span>(<span class="string">&#x27;he.*?(\d).*rld$&#x27;</span>,s)</span><br><span class="line"><span class="built_in">print</span>(res.group(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">## 结果：123456</span></span><br></pre></td></tr></table></figure></div><p>常用非贪婪表达式</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" data-rel="PLAINTEXT"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*? 重复任意次，但尽可能少重复</span><br><span class="line">+? 重复1次或更多次，但尽可能少重复</span><br><span class="line">?? 重复0次或1次，但尽可能少重复</span><br><span class="line">&#123;n,m&#125;? 重复n到m次，但尽可能少重复</span><br><span class="line">&#123;n,&#125;? 重复n次以上，但尽可能少重复</span><br></pre></td></tr></table></figure></div></div></div><div class="article-footer"><div class="article-meta pull-left"><span class="post-categories"><i class="icon-categories"></i> <a href="/categories/前端/">前端</a> </span><span class="post-tags"><i class="icon-tags"></i> <a href="/tags/正则/">正则</a><a href="/tags/js/">js</a><a href="/tags/去除零/">去除零</a></span></div></div></article></div></main><footer class="site-footer"><p class="mp"><img alt="关注我" src="/mp.png" style="border-radius:10px" no-lazy></p><p class="site-info">湘ICP备2020021380号-1<br>&copy; 2014 - 2023 SIWEN.PENG</p></footer><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script"),c=(e.src="//hm.baidu.com/hm.js?83fbb968d837cac86cb15c97ddd8cdd4",document.getElementsByTagName("script")[0]);c.parentNode.insertBefore(e,c)}()</script></div></div><style>[bg-lazy]{background-image:none!important;background-color:#eee!important}</style><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var a=/\.(gif|jpg|jpeg|tiff|png)$/i,e=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(t){var r=t.parentNode;"A"===r.tagName&&(r.href.match(a)||r.href.match(e))&&(r.href=t.dataset.original)})})</script><script>!function(t){function e(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function n(){i&&(r=e());for(var n,a=0;a<r.length;a++)0<=(n=(n=r[a]).getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(t.innerHeight*o||document.documentElement.clientHeight*o)&&function(){var e,n,i,o=r[a],c=function(){r=r.filter(function(t){return o!==t}),t.imageLazyLoadSetting.onImageLoaded&&t.imageLazyLoadSetting.onImageLoaded(o)};(e=o).hasAttribute("bg-lazy")?(e.removeAttribute("bg-lazy"),c()):(n=new Image,i=e.getAttribute("data-original"),n.onload=function(){e.src=i,e.removeAttribute("data-original"),c()},e.src!==i&&(n.src=i))}()}function a(){clearTimeout(n.tId),n.tId=setTimeout(n,500)}t.imageLazyLoadSetting.processImages=n;var i=t.imageLazyLoadSetting.isSPA,o=t.imageLazyLoadSetting.preloadRatio||1,r=e();n(),document.addEventListener("scroll",a),t.addEventListener("resize",a),t.addEventListener("orientationchange",a)}(this)</script></body></html>