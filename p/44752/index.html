<!DOCTYPE HTML><html><head><meta charset="utf-8"><title>寻找重复数——LeetCode287 | 人间日常 | 所行皆过往，所愿皆成真</title><meta name="author" content="SIWEN.PENG"><meta name="description" content="使用二分法解决寻找重复数，练习二分法使用"><meta name="keywords" content="寻找重复数,二分法,算法,leetcode,psw,彭思文,siwen,思文,sven,java,study,solution,blog"><meta id="viewport" name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta property="og:title" content="寻找重复数——LeetCode287"><meta property="og:site_name" content="人间日常"><meta property="og:image" content="/favicon.ico"><link href="/favicon.ico" rel="icon"><link rel="alternate" href="/atom.xml" title="人间日常" type="application/atom+xml"><link rel="stylesheet" href="/css/style.css" media="screen" type="text/css"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="blog"><div class="content"><header><div class="site-branding"><h1 class="site-title"><a href="/">人间日常</a></h1><p class="site-description">所行皆过往，所愿皆成真</p></div><nav class="site-navigation"><ul></ul></nav></header><main class="site-main posts-loop"><article><h3 class="article-title"><span>寻找重复数——LeetCode287</span></h3><div class="article-top-meta"><span class="posted-on"><a target="_blank" href="//p/44752/" rel="bookmark noopener"><time class="entry-date published" datetime="2021-11-11T13:02:11.000Z">2021-11-11</time></a></span></div><div class="article-content"><div class="entry"><p>给定一个包含 n + 1 个整数的数组 nums ，其数字都在 1 到 n 之间（包括 1 和 n），可知至少存在一个重复的整数。<br>假设 nums 只有 一个重复的整数 ，找出 这个重复的数 。<br>你设计的解决方案必须不修改数组 nums 且只用常量级 O (1) 的额外空间。<br>Leetcode-287 链接：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://leetcode-cn.com/problems/find-the-duplicate-number">https://leetcode-cn.com/problems/find-the-duplicate-number</a></p><span id="more"></span><p>示例 1：</p><figure class="highlight sh"><figcaption data-lang="sh"></figcaption><table><tr><td data-num="1"></td><td><pre>输入：nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1,3</span>,4,2,2<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>输出：2</pre></td></tr></table></figure><p>示例 2：</p><figure class="highlight sh"><figcaption data-lang="sh"></figcaption><table><tr><td data-num="1"></td><td><pre>输入：nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3,1</span>,3,4,2<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>输出：3</pre></td></tr></table></figure><p>示例 3：</p><figure class="highlight sh"><figcaption data-lang="sh"></figcaption><table><tr><td data-num="1"></td><td><pre>输入：nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1,1</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre>输出：1</pre></td></tr></table></figure><p>示例 4：</p><pre><code>输入：nums = [1,1,2]
输出：1
</code></pre><p>提示：</p><figure class="highlight sh"><figcaption data-lang="sh"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token number">1</span> <span class="token operator">&lt;=</span> n <span class="token operator">&lt;=</span> <span class="token number">105</span></pre></td></tr><tr><td data-num="2"></td><td><pre>nums.length <span class="token operator">==</span> n + <span class="token number">1</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token number">1</span> <span class="token operator">&lt;=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> n</pre></td></tr></table></figure><p>nums 中 只有一个整数 出现 两次或多次 ，其余整数均只出现 一次</p><h3 id="解题"><a class="markdownIt-Anchor" href="#解题">#</a> 解题</h3><ol><li>二分法</li></ol><p>针对用例 <code>[1,3,4,2,2]</code></p><p>定义一个 <code>cnt</code> 数组用来存储小于等于 索引 <code>i</code> 的总数</p><p>如果知道 cnt 数组随数字 index 逐渐增大具有单调性，那么当 num [index] 那么我们就可以直接利用二分查找来找到重复的数</p><table><thead><tr><th style="text-align:center">nums</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th></tr></thead><tbody><tr><td style="text-align:center">cnt</td><td style="text-align:center">1</td><td style="text-align:center">3</td><td style="text-align:center">4</td><td style="text-align:center">5</td></tr></tbody></table><p>小于等于 1 的一个</p><p>小于等于 2 的三个</p><p>小于等于 3 的四个</p><p>小于等于 4 的五个</p><p>由此可见：我们的目标是 2，target 满足: target 前面的 <code>cnt[i] &lt;= i</code> , 目标值 target 之后的 <code>cnt[i] &gt; i</code></p><p>实际上可以归纳为：</p><ul><li><p>如果测试用例的数组中 <code>target</code> 出现了两次，其余的数各出现了一次，这个时候肯定满足上文提及的性质，因为小于 <code>target</code> 的数 i 满足 <code>cnt[i]=i</code> ，大于等于 <code>target</code> 的数 <code>j</code> 满足 <code>cnt[j]=j+1</code> 。</p></li><li><p>如果测试用例的数组中 <code>target</code> 出现了三次及以上，那么必然有一些数不在 <code>nums</code> 数组中了，这个时候相当于我们用 <code>target</code> 去替换了这些数，我们考虑替换的时候对 <code>cnt[]</code> 数组的影响。如果替换的数 <code>i</code> 小于 <code>target</code> ，那么在数 <code>i</code> 到 <code>target</code> 区间的值，均减一，其他不变，满足条件。如果替换的数 <code>j</code> 大于等于 <code>target</code> ，那么 <code>target</code> 到 数 <code>j</code> 区间内值均加一，其他不变，亦满足条件。</p></li></ul><p>因此不管多个重复还是两个重复，数组都满足那个性质。</p><p>代码实现：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findDuplicate</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> r <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> ans <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;=</span> r<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>           # 右移动一位，相关于除以<span class="token number">2</span>，取中间值</pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>              # 将小于等于中间值都加起来  </pre></td></tr><tr><td data-num="11"></td><td><pre>              <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>                    cnt<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>           # 如果此时的cnt总数小于等于mid，那说明不在mid左边</pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>cnt <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>               # 把左边拉到中间</pre></td></tr><tr><td data-num="18"></td><td><pre>                l <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>                # 否则把右边拉到中间</pre></td></tr><tr><td data-num="21"></td><td><pre>                r <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>                # 记录答案</pre></td></tr><tr><td data-num="23"></td><td><pre>                ans <span class="token operator">=</span> mid<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>复杂度分析</p><p>时间复杂度： <code>O(n * logn)</code> ，其中 n 为 nums 数组的长度。二分查找最多需要二分 <code>O(logn)</code> 次，每次判断的时候需要 <code>O(n)</code> 遍历 nums 数组求解小于等于 mid 的数的个数，因此总时间复杂度为 <code>O(n * logn)</code> 。</p><p>空间复杂度： <code>O(1)</code> 。我们只需要常数空间存放若干变量。</p><ol start="2"><li>快慢指针</li></ol><p>我们对 nums 数组建图，每个位置 <code>i</code> 连一条 <code>i→nums[i]</code> 的边。由于存在的重复的数字<br><code>target</code> 因此 <code>target</code> 这个位置一定有起码两条指向它的边，因此整张图一定存在环，且我们要找到的<br><code>target</code> 就是这个环的入口.</p><p>我们先设置慢指针 <code>slow 和快指针</code> <code>fast</code> ，慢指针每次走一步，快指针每次走两步，根据「Floyd 判圈算法」两个指针在有环的情况下一定会相遇，此时我们再将 <code>slow</code> 放置起点 <code>0</code> ，两个指针每次同时移动一步，相遇的点就是答案。</p><p>代码实现：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findDuplicate</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">int</span> slow <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> fast <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      	# 找环的入口</pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">do</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            slow <span class="token operator">=</span> nums<span class="token punctuation">[</span>slow<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            fast <span class="token operator">=</span> nums<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>fast<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>slow <span class="token operator">!=</span> fast<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        # 重置slow为起点</pre></td></tr><tr><td data-num="10"></td><td><pre>        slow <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>slow <span class="token operator">!=</span> fast<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            slow <span class="token operator">=</span> nums<span class="token punctuation">[</span>slow<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            fast <span class="token operator">=</span> nums<span class="token punctuation">[</span>fast<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        # 再次相遇 就是环入口</pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">return</span> slow<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>复杂度分析</p><p>时间复杂度： <code>O(n)</code> 。「Floyd 判圈算法」时间复杂度为线性的时间复杂度。<br>空间复杂度： <code>O(1)</code> 。我们只需要常数空间存放若干变量。</p></div></div><div class="article-footer"><div class="article-meta pull-left"><span class="post-tags"><i class="icon-tags"></i> <a href="/tags/leetcode/">leetcode</a><a href="/tags/算法/">算法</a><a href="/tags/二分法/">二分法</a><a href="/tags/快慢指针/">快慢指针</a></span></div></div></article></main><footer class="site-footer"><p class="site-info"><br>&copy; 2023 SIWEN.PENG</p></footer></div></div></body></html>